Ext.define("Xfr.ComponentManager",{alternateClassName:"Xfr.ComponentMgr",singleton:true,constructor:function(){this.idMap={};this.classMap={}},cmpInClassMap:function(a){if(this.classMap[a.self.getName()]){return true}else{return false}},register:function(a){var c=a.getId();if(this.idMap[c]){var b="Registering a component with a id (`"+c+"`) which has already been used. Please ensure the existing component has been destroyed (`Xfr.Component#destroy()`.";Ext.Logger.warn(b)}this.idMap[a.getId()]=a},registerCmpTpl:function(a){if(!this.cmpInClassMap(a)){this.classMap[a.self.getName()]={tplTokens:a.tplTokens}}else{this.classMap[a.self.getName()].tplTokens=a.tplTokens}},unregister:function(a){delete this.idMap[a.getId()]},isRegistered:function(a){return this.map[a]!==undefined},get:function(a){return this.idMap[a]},getTplTokens:function(a){var b=this.classMap[a.self.getName()];if(!Ext.isEmpty(b)){return b.tplTokens}return null}});
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function defineMustache(b,a){if(typeof exports==="object"&&exports){a(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],a)}else{Mustache={};a(Mustache)}}}(this,function mustacheFactory(F){var x=Object.prototype.toString;var y=Array.isArray||function d(O){return x.call(O)==="[object Array]"};function u(O){return typeof O==="function"}function i(O){return O.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var o=RegExp.prototype.test;function b(P,O){return o.call(P,O)}var s=/\S/;function E(O){return !b(s,O)}var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function z(O){return String(O).replace(/[&<>"'\/]/g,function P(Q){return q[Q]})}var t=/\s*/;var C=/\s+/;var l=/\s*=/;var L=/\s*\}/;var r=/#|\^|\/|>|\{|&|=|!/;function e(ah,W){if(!ah){return[]}var Y=[];var X=[];var T=[];var ai=false;var af=false;function ae(){if(ai&&!af){while(T.length){delete X[T.pop()]}}else{T=[]}ai=false;af=false}var aa,V,ag;function U(aj){if(typeof aj==="string"){aj=aj.split(C,2)}if(!y(aj)||aj.length!==2){throw new Error("Invalid tags: "+aj)}aa=new RegExp(i(aj[0])+"\\s*");V=new RegExp("\\s*"+i(aj[1]));ag=new RegExp("\\s*"+i("}"+aj[1]))}U(W||F.tags);var Q=new a(ah);var R,P,Z,ac,S,O;while(!Q.eos()){R=Q.pos;Z=Q.scanUntil(aa);if(Z){for(var ad=0,ab=Z.length;ad<ab;++ad){ac=Z.charAt(ad);if(E(ac)){T.push(X.length)}else{af=true}X.push(["text",ac,R,R+1]);R+=1;if(ac==="\n"){ae()}}}if(!Q.scan(aa)){break}ai=true;P=Q.scan(r)||"name";Q.scan(t);if(P==="="){Z=Q.scanUntil(l);Q.scan(l);Q.scanUntil(V)}else{if(P==="{"){Z=Q.scanUntil(ag);Q.scan(L);Q.scanUntil(V);P="&"}else{Z=Q.scanUntil(V)}}if(!Q.scan(V)){throw new Error("Unclosed tag at "+Q.pos)}S=[P,Z,R,Q.pos];X.push(S);if(P==="#"||P==="^"){Y.push(S)}else{if(P==="/"){O=Y.pop();if(!O){throw new Error('Unopened section "'+Z+'" at '+R)}if(O[1]!==Z){throw new Error('Unclosed section "'+O[1]+'" at '+R)}}else{if(P==="name"||P==="{"||P==="&"){af=true}else{if(P==="="){U(Z)}}}}}O=Y.pop();if(O){throw new Error('Unclosed section "'+O[1]+'" at '+Q.pos)}return m(p(X))}function p(T){var P=[];var R,O;for(var Q=0,S=T.length;Q<S;++Q){R=T[Q];if(R){if(R[0]==="text"&&O&&O[0]==="text"){O[1]+=R[1];O[3]=R[3]}else{P.push(R);O=R}}}return P}function m(T){var V=[];var S=V;var U=[];var P,R;for(var O=0,Q=T.length;O<Q;++O){P=T[O];switch(P[0]){case"#":case"^":S.push(P);U.push(P);S=P[4]=[];break;case"/":R=U.pop();R[5]=P[2];S=U.length>0?U[U.length-1][4]:V;break;default:S.push(P)}}return V}function a(O){this.string=O;this.tail=O;this.pos=0}a.prototype.eos=function J(){return this.tail===""};a.prototype.scan=function M(Q){var P=this.tail.match(Q);if(!P||P.index!==0){return""}var O=P[0];this.tail=this.tail.substring(O.length);this.pos+=O.length;return O};a.prototype.scanUntil=function I(Q){var P=this.tail.search(Q),O;switch(P){case -1:O=this.tail;this.tail="";break;case 0:O="";break;default:O=this.tail.substring(0,P);this.tail=this.tail.substring(P)}this.pos+=O.length;return O};function K(P,O){this.view=P;this.cache={".":this.view};this.parent=O}K.prototype.push=function G(O){return new K(O,this)};K.prototype.lookup=function j(R){var P=this.cache;var T;if(R in P){T=P[R]}else{var S=this,U,Q,O=false;while(S){if(R.indexOf(".")>0){T=S.view;U=R.split(".");Q=0;while(T!=null&&Q<U.length){if(Q===U.length-1&&T!=null){O=(typeof T==="object")&&T.hasOwnProperty(U[Q])}T=T[U[Q++]]}}else{if(S.view!=null&&typeof S.view==="object"){T=S.view[R];O=S.view.hasOwnProperty(R)}}if(O){break}S=S.parent}P[R]=T}if(u(T)){T=T.call(this.view)}return T};function k(){this.cache={}}k.prototype.clearCache=function A(){this.cache={}};k.prototype.parse=function v(Q,P,S){var R=null;if(S!==undefined&&S===false){R=e(Q,P)}else{var O=this.cache;R=O[Q];if(R==null){R=O[Q]=e(Q,P)}}return R};k.prototype.render=function B(R,O,Q){var S=this.parse(R);var P=(O instanceof K)?O:new K(O);return this.renderTokens(S,P,Q,R)};k.prototype.renderTokens=function n(V,O,T,X){var R="";var Q,P,W;for(var S=0,U=V.length;S<U;++S){W=undefined;Q=V[S];P=Q[0];if(P==="#"){W=this.renderSection(Q,O,T,X)}else{if(P==="^"){W=this.renderInverted(Q,O,T,X)}else{if(P===">"){W=this.renderPartial(Q,O,T,X)}else{if(P==="&"){W=this.unescapedValue(Q,O)}else{if(P==="name"){W=this.escapedValue(Q,O)}else{if(P==="text"){W=this.rawValue(Q)}}}}}}if(W!==undefined){R+=W}}return R};k.prototype.renderSection=function w(Q,O,T,W){var X=this;var S="";var U=O.lookup(Q[1]);function P(Y){return X.render(Y,O,T)}if(!U){return}if(y(U)){for(var R=0,V=U.length;R<V;++R){S+=this.renderTokens(Q[4],O.push(U[R]),T,W)}}else{if(typeof U==="object"||typeof U==="string"||typeof U==="number"){S+=this.renderTokens(Q[4],O.push(U),T,W)}else{if(u(U)){if(typeof W!=="string"){throw new Error("Cannot use higher-order sections without the original template")}U=U.call(O.view,W.slice(Q[3],Q[5]),P);if(U!=null){S+=U}}else{S+=this.renderTokens(Q[4],O,T,W)}}}return S};k.prototype.renderInverted=function c(Q,P,O,S){var R=P.lookup(Q[1]);if(!R||(y(R)&&R.length===0)){return this.renderTokens(Q[4],P,O,S)}};k.prototype.renderPartial=function H(Q,P,O){if(!O){return}var R=u(O)?O(Q[1]):O[Q[1]];if(R!=null){return this.renderTokens(this.parse(R),P,O,R)}};k.prototype.unescapedValue=function g(P,O){var Q=O.lookup(P[1]);if(Q!=null){return Q}};k.prototype.escapedValue=function D(P,O){var Q=O.lookup(P[1]);if(Q!=null){return F.escape(Q)}};k.prototype.rawValue=function f(O){return O[1]};F.name="mustache.js";F.version="2.0.0";F.tags=["{{","}}"];var N=new k();F.clearCache=function A(){return N.clearCache()};F.parse=function v(P,O,Q){return N.parse(P,O,Q)};F.render=function B(Q,O,P){return N.render(Q,O,P)};F.renderTokens=function n(R,O,Q,S){var P=(O instanceof K)?O:new K(O);return N.renderTokens(R,P,Q,S)};F.to_html=function h(R,P,Q,S){var O=F.render(R,P,Q);if(u(S)){S(O)}else{return O}};F.escape=z;F.Scanner=a;F.Context=K;F.Writer=k}));Ext.define("Xfr.Mustache",{});Ext.define("Xfr.Component",{requires:["Xfr.ComponentManager","Xfr.Mustache"],extend:"Ext.Component",xtype:"xfr-component",config:{tpl:"",attr:{},control:{},refs:{},data:{},items:{}},$id:null,constructor:function(){this.callParent(arguments);this.controlEvents()},initialize:function(){var f=this;this.callParent(arguments);f.$this=$("#"+this.getId());var b=this.getItems();if(!Ext.isEmpty(this.getItems())){for(var c=0;c<b.length;c++){var e=b[c];if(!Ext.isEmpty(e)){e.renderTo=$("#"+this.getId()+" "+e.position)[0];var d=e.className;delete e.className;var a=Ext.create($.trim(d),e);if(!Ext.isEmpty(e.instanceName)){f[e.instanceName]=a}}}}},getElementConfig:function(){var b=this;var a={};if(!Ext.isEmpty(b.initialConfig.attr)){Ext.apply(a,b.initialConfig.attr)}return Ext.apply({reference:"element",classList:["xfr-cmp"]},a)},initElement:function(){this.callParent(arguments);var b=this;var a=b.initialConfig.tpl;if(this.initTpl(a)){var c=Mustache.renderTokens(this.tplTokens,b.initialConfig);this.renderElement.setHtml(c)}},updateData:function(){},initTpl:function(b){if(Ext.isEmpty(b)){if(!Xfr.ComponentMgr.cmpInClassMap(this)){var c=this.getTplId(),a=$("#"+c).html();if(!Ext.isEmpty(c)&&!Ext.isEmpty(a)){this.config.tpl=a}else{a=this.loadTpl();this.config.tpl=a}if(!Ext.isEmpty(this.config.tpl)){this.tplTokens=Mustache.parse(this.config.tpl,null,false);Xfr.ComponentManager.registerCmpTpl(this)}else{return false}}else{this.tplTokens=Xfr.ComponentMgr.getTplTokens(this)}}else{this.tplTokens=Mustache.parse(b)}return true},getTplPath:function(){var a=Ext.Loader.getPath(this.self.getName());var b=a.split("/");var c=b.pop();c=c.substr(0,c.length-2);c=c.toLowerCase()+"tpl";b.push("tpl");b.push(c);return b.join("/")},getTplId:function(){var b=this.self.getName().toLowerCase().split(".");var a=b.join("-");return a},loadTpl:function(){var b=null;var c=this;var a=c.getTplPath();$.ajax({url:a,dataType:"html",async:false,success:function(d){b=d},error:function(d){return null;throw new Error("The template loading failed")}});return b},controlEvents:function(){var e=this;var g=this.getControl();var b=this.getRefs();if(!Ext.isEmpty(g)){for(var f in g){var h=g[f];if(!Ext.isEmpty(h)){for(var d in h){var c=h[d];if(!Ext.isEmpty(c)){if(!Ext.isEmpty(b)&&!Ext.isEmpty(b[f])){$("#"+e.getId()+" "+b[f]).bind(d,function(){e[c](this)})}else{var a={};$("#"+e.getId()+" "+f).bind(d,function(){e[c](this)})}}}}}}}});Ext.define("Xfr.panel.Mask",{requires:[],extend:"Xfr.Component",config:{},initialize:function(){this.callParent();$("#"+this.getId()+" .xfr-mask").modal({keyboard:false,show:false,backdrop:"static"});$("#"+this.getId()+" .xfr-mask").on("shown.bs.modal",function(){$(this).find(".modal-dialog").css({"margin-top":function(){return -($(this).outerHeight()/2)},"margin-left":function(){return -($(this).outerWidth()/2)}})})},show:function(){$("#"+this.getId()+" .xfr-mask").modal("show")},hide:function(){$("#"+this.getId()+" .xfr-mask").modal("hide")}});